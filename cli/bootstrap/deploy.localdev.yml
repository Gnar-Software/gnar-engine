# deploy.localdev.yml

# - This file is used to orchestrate locally running containers for development
# - environment: localdev is a named convention required for local development 

config:
  core-version: 1.0
  architecture: microservice
  region: eu-west-2
  environment: localdev
  namespace: my-project

  services:
    - name: control
      listener_rules:
        paths:
          - /control
          - /tasks
      min-tasks: 1
      max-tasks: 1
      depends_on:
        - control-db
      command: ["npm", "run", "start:dev"]
      ports: 
        - "4001:3000"

    - name: user
      listener_rules:
        paths:
          - /authenticate
          - /users
      min-tasks: 1
      max-tasks: 1
      depends_on:
        - control-db
      command: ["npm", "run", "start:dev"]
      ports: 
        - "4002:3000"

    - name: agent
      listener_rules:
        paths:
          - /agent
      min-tasks: 1
      max-tasks: 1
      depends_on:
        - agent-db
      command: ["npm", "run", "start:dev"]
      ports: 
        - "4003:3000"

